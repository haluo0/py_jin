<!DOCTYPE html>
<html>
<head>
    <title>å·¡æ£€ç³»ç»Ÿ - åå°ç®¡ç†</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-4">
    <h2>åˆ›å»ºæ–°ç‰©å“</h2>
    <form method="post">
        <div class="mb-3">
            <label class="form-label">ç‰©å“åç§°</label>
            <input name="name" class="form-control" required>
        </div>
        <div class="mb-3">
            <label class="form-label">ä½ç½®</label>
            <input name="location" class="form-control">
        </div>
        <div class="mb-3">
            <label class="form-label">æ£€æŸ¥é¡¹ï¼ˆæ¯è¡Œä¸€ä¸ªï¼‰</label>
            <textarea name="check_item" rows="4" class="form-control" placeholder="ä¾‹å¦‚ï¼š&#10;å¤–è§‚å®Œå¥½&#10;ç”µæºæ­£å¸¸&#10;æ— ç ´æŸ"></textarea>
        </div>
        <button type="submit" class="btn btn-primary">åˆ›å»ºç‰©å“å¹¶ç”ŸæˆäºŒç»´ç </button>
    </form>

    <hr>
    <h3>å·²æœ‰ç‰©å“ï¼ˆå¯æ‰“å°äºŒç»´ç ï¼‰</h3>
    {% if items_with_qr %}
        {% for item, qr_b64 in items_with_qr %}
        <div class="card mb-3">
            <div class="card-body">
                <h5 class="card-title">{{ item.name }}</h5>
                <p class="card-text">ä½ç½®ï¼š{{ item.location }}</p>
                <!-- å…³é”®ï¼šæ˜¾ç¤º Base64 äºŒç»´ç  -->
                <img src="{{ qr_b64 }}" alt="QR Code" width="180" class="border p-2 bg-white">
                <p class="mt-2"><small>æ‰«ç åœ°å€: {{ request.host_url }}scan/{{ item.id }}</small></p>
                <button class="btn btn-outline-secondary btn-sm mt-2" onclick="window.print()">ğŸ–¨ï¸ æ‰“å°æ­¤ç </button>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <p>æš‚æ— ç‰©å“ï¼Œè¯·å…ˆåˆ›å»ºã€‚</p>
    {% endif %}
</body>
</html>